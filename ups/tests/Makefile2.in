# $Id: Makefile2.in,v 1.1.1.1 2001/01/27 23:32:40 neitzel Exp $

# -----------------------------------------------------------------------------
#  Makefile for ups test programs  -  C++ and Fortran tests
# -----------------------------------------------------------------------------

SHELL		= /bin/sh
@SET_MAKE@

srcdir		= @srcdir@
topdir		= @top_srcdir@
VPATH		= @srcdir@
S		= ${srcdir}/

CC		= @CC@
CXX		= @CXX@
F77		= @F77@

# The directory where X include files live.
X11_INC		= @X_CFLAGS@

# X libraries
X11_LIB		= @X_LIBS@  @X_PRE_LIBS@  -lX11  @X_EXTRA_LIBS@

CPPFLAGS	= @CPPFLAGS@  @DEFS@  -I.  -I..  ${X11_INC}
CFLAGS		= @CFLAGS@  ${CPPFLAGS}
CXXFLAGS	= @CXXFLAGS@
LDFLAGS		= @LDFLAGS@  ${X11_LIB}  @LIBS@
LIBS		= @LIBS@

SHOWDEFS	= -dM
# -----------------------------------------------------------------------------

CXXBINARIES	= Templates3
CXXSRC		= Templates3.cc

FBINARIES	= test1_f  pippo2 \
		  g77-u77-test
FSRC		= test1_f.f  pippo2.f \
		  g77-u77-test.f

HDRS		= Templates3x.h Templates3x.cc

# -----------------------------------------------------------------------------

default_target:

cxx: ${CXXBINARIES}

fortran: ${FBINARIES}

all: cxx fortran

UPS_CXXFLAGS	= ${CXXFLAGS} ${UPS_HEADERS}
UPS_F77FLAGS	= ${CFLAGS} ${UPS_HEADERS}

CXXLINE		= ${CXX} -c ${UPS_CXXFLAGS} $S
F77LINE		= ${F77} -c ${UPS_CFLAGS}   $S

LINKCXX		= ${CXX}
LINKF77		= ${F77}

LINKFLAGS	= ${LDFLAGS} ${X11_LIB} ${LIBS}

LINKCXXFLAGS	= ${UPS_CXXFLAGS}
LINKF77FLAGS	= ${UPS_F77FLAGS}

ALL_SRC		= ${CXXSRC} ${FSRC} ${HDRS}
FILES		= ${ALL_SRC}

# -----------------------------------------------------------------------------

Templates3.o: Templates3.cc Templates3x.cc Templates3x.h
	${CXXLINE}Templates3.cc

Templates3: Templates3.o
	${LINKCXX} ${LINKCXXFLAGS} -o $@ Templates3.o

# -----------------------------------------------------------------------------

g77-u77-test.o: g77-u77-test.f
	${F77LINE}g77-u77-test.f

g77-u77-test: g77-u77-test.o
	${LINKF77} ${LINKF77FLAGS} g77-u77-test.o  -o $@

pippo2.o: pippo2.f
	${F77LINE}pippo2.f  -o $@

pippo2: pippo2.o
	${LINKF77} ${LINKF77FLAGS} pippo2.o  -o $@

test1_f.o: test1_f.f
	${F77LINE}test1_f.f  -o $@

test1_f: test1_f.o
	${LINKF77} ${LINKF77FLAGS} test1_f.o  -o $@

# -----------------------------------------------------------------------------

clean:
	rm -f ${FBINARIES} ${CXXBINARIES} *.o *.core core

# -----------------------------------------------------------------------------
#  Header dependenices
# -----------------------------------------------------------------------------
# .o header dependencies, generated by make deps
