<HTML>
<HEAD>
<TITLE>operators.ijs.html</TITLE>
</HEAD>
<BODY BGcolor=#ffffff TEXT=#000000>
<PRE>
<FONT color=#008000>NB. GML operations</FONT>
<FONT color=#000080>coclass</FONT><FONT color=#008080>'z'</FONT>

<FONT color=#000080>addf</FONT><FONT color=#000000>=:</FONT><FONT color=#000080>addi</FONT> <FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push +&amp;.&gt;/ {:&quot;1 pop y.'</FONT>
<FONT color=#000080>divf</FONT> <FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push %&amp;.&gt;/ {:&quot;1 pop y.'</FONT>
<FONT color=#000080>divi</FONT> <FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push GMLdivi {:&quot;1 pop y.'</FONT>
<FONT color=#000080>eqf</FONT><FONT color=#000000>=:</FONT><FONT color=#000080>eqi</FONT> <FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push =&amp;.&gt;/ {:&quot;1 pop y.'</FONT>
<FONT color=#000080>lessf</FONT><FONT color=#000000>=:</FONT><FONT color=#000080>lessi</FONT> <FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push &lt;&amp;.&gt;/ {:&quot;1 pop y.'</FONT>
<FONT color=#000080>mulf</FONT><FONT color=#000000>=:</FONT><FONT color=#000080>muli</FONT> <FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push *&amp;.&gt;/ {:&quot;1 pop y.'</FONT>
<FONT color=#000080>modi</FONT> <FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push GMLmodi&amp;.&gt; {:&quot;1 pop y.'</FONT>
<FONT color=#000080>negf</FONT><FONT color=#000000>=:</FONT><FONT color=#000080>negi</FONT> <FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push -&amp;.&gt; {:&quot;1 pop y.'</FONT>
<FONT color=#000080>subf</FONT><FONT color=#000000>=:</FONT><FONT color=#000080>subi</FONT> <FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push -&amp;.&gt;/ {:&quot;1 pop y.'</FONT>
<FONT color=#000080>real</FONT> <FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push {:&quot;1 pop y.'</FONT>
<FONT color=#000080>cos</FONT><FONT color=#000000>=:</FONT><FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push GMLcos&amp;.&gt; {:&quot;1 pop y.'</FONT>
<FONT color=#000080>sin</FONT><FONT color=#000000>=:</FONT><FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push GMLsin&amp;.&gt; {:&quot;1 pop y.'</FONT>
<FONT color=#000080>acos</FONT><FONT color=#000000>=:</FONT><FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push GMLacos&amp;.&gt; {:&quot;1 pop y.'</FONT>
<FONT color=#000080>asin</FONT><FONT color=#000000>=:</FONT><FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push GMLasin&amp;.&gt; {:&quot;1 pop y.'</FONT>
<FONT color=#000080>sqrt</FONT><FONT color=#000000>=:</FONT><FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push GMLsqrt&amp;.&gt; {:&quot;1 pop y.'</FONT>
<FONT color=#000080>floor</FONT><FONT color=#000000>=:</FONT><FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push GMLfloor&amp;.&gt; {:&quot;1 pop y.'</FONT>
<FONT color=#000080>frac</FONT><FONT color=#000000>=:</FONT><FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push GMLfrac&amp;.&gt; {:&quot;1 pop y.'</FONT>
<FONT color=#000080>clampf</FONT><FONT color=#000000>=:</FONT><FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push GMLclampf&amp;.&gt; {:&quot;1 pop y.'</FONT>
<FONT color=#000080>length</FONT><FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push $&amp;.&gt; {:&quot;1 pop y.'</FONT>
<FONT color=#000080>point</FONT><FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push GMLpoint {:&quot;1 pop y.'</FONT>
<FONT color=#000080>getx</FONT><FONT color=#000000>=:</FONT> <FONT color=#a020f0>13</FONT> <FONT color=#ff0000>:</FONT> <FONT color=#008080>'0 push GMLgetx {:&quot;1 pop y.'</FONT>

<FONT color=#000080>GMLcos</FONT><FONT color=#000000>=:</FONT> <FONT color=#008080>[:</FONT> <FONT color=#000080>rfd</FONT> <FONT color=#008080>2:</FONT> <FONT color=#008080>o.</FONT> <FONT color=#008080>[</FONT>
<FONT color=#000080>GMLacos</FONT><FONT color=#000000>=:</FONT> <FONT color=#008080>[:</FONT> <FONT color=#000080>rfd</FONT> <FONT color=#008080>_2:</FONT> <FONT color=#008080>o.</FONT> <FONT color=#008080>[</FONT>
<FONT color=#000080>GMLasin</FONT><FONT color=#000000>=:</FONT> <FONT color=#008080>[:</FONT> <FONT color=#000080>rfd</FONT> <FONT color=#008080>_1:</FONT> <FONT color=#008080>o.</FONT> <FONT color=#008080>[</FONT>
<FONT color=#000080>GMLclampf</FONT><FONT color=#000000>=:</FONT> <FONT color=#000080>verb</FONT> <FONT color=#000080>define</FONT>
<B><FONT color=#804040>if.</FONT></B> <FONT color=#c0c0c0>y.</FONT><FONT color=#008080>&lt;</FONT><FONT color=#a020f0>0</FONT>
    <B><FONT color=#804040>do.</FONT></B> <FONT color=#a020f0>0</FONT>
<B><FONT color=#804040>elseif.</FONT></B> <FONT color=#c0c0c0>y.</FONT><FONT color=#008080>&gt;</FONT><FONT color=#a020f0>1</FONT>
    <B><FONT color=#804040>do.</FONT></B> <FONT color=#a020f0>1</FONT>
<B><FONT color=#804040>elseif.</FONT></B>
    <B><FONT color=#804040>do.</FONT></B> <FONT color=#c0c0c0>y.</FONT>
<B><FONT color=#804040>end.</FONT></B>
)
<FONT color=#000080>GMLdivi</FONT><FONT color=#000000>=:</FONT> <FONT color=#000080>verb</FONT> <FONT color=#000080>define</FONT>
<FONT color=#008080>'n1 n2'</FONT><FONT color=#000000>=.</FONT> <FONT color=#c0c0c0>y.</FONT>
<FONT color=#000080>assert</FONT> <FONT color=#a020f0>0</FONT><FONT color=#008080>~:</FONT><FONT color=#000080>n2</FONT>
<FONT color=#000080>GMLfloor</FONT> <FONT color=#000080>n1</FONT><FONT color=#008080>%</FONT><FONT color=#000080>n2</FONT>
)
<FONT color=#000080>GMLdivf</FONT><FONT color=#000000>=:</FONT> <FONT color=#008080>%</FONT><FONT color=#ffa500>/</FONT>
<FONT color=#000080>GMLfloor</FONT><FONT color=#000000>=:</FONT> (<FONT color=#008080>[:</FONT> <FONT color=#008080>*</FONT> <FONT color=#008080>]</FONT>) <FONT color=#008080>*</FONT> <FONT color=#008080>[:</FONT> <FONT color=#008080>&lt;.</FONT> <FONT color=#008080>[:</FONT> <FONT color=#008080>|</FONT> <FONT color=#008080>]</FONT>
<FONT color=#000080>GMLfrac</FONT><FONT color=#000000>=:</FONT> <FONT color=#a020f0>1</FONT><FONT color=#ff0000>&amp;</FONT><FONT color=#008080>#:</FONT>
<FONT color=#000080>GMLmodi</FONT><FONT color=#000000>=:</FONT> <FONT color=#008080>[:</FONT> <FONT color=#008080>|</FONT><FONT color=#ffa500>/</FONT> <FONT color=#008080>|.</FONT>
<FONT color=#000080>GMLsin</FONT><FONT color=#000000>=:</FONT> <FONT color=#008080>[:</FONT> <FONT color=#000080>rfd</FONT> <FONT color=#008080>1:</FONT> <FONT color=#008080>o.</FONT> <FONT color=#008080>[</FONT>
<FONT color=#000080>GMLsqrt</FONT><FONT color=#000000>=:</FONT> <FONT color=#000080>verb</FONT> <FONT color=#000080>define</FONT>
<FONT color=#000080>assert</FONT> _<FONT color=#a020f0>1</FONT><FONT color=#008080>~:*</FONT><FONT color=#c0c0c0>y.</FONT>
<FONT color=#008080>%:</FONT><FONT color=#c0c0c0>y.</FONT>
)

<FONT color=#008000>NB. points, just a 3 element vector, 2.5</FONT>
<FONT color=#000080>GMLgetx</FONT><FONT color=#000000>=:</FONT> <FONT color=#008080>0:</FONT> <FONT color=#008080>{</FONT> <FONT color=#008080>]</FONT>
<FONT color=#000080>GMLgety</FONT><FONT color=#000000>=:</FONT> <FONT color=#008080>1:</FONT> <FONT color=#008080>{</FONT> <FONT color=#008080>]</FONT>
<FONT color=#000080>GMLgetz</FONT><FONT color=#000000>=:</FONT> <FONT color=#008080>2:</FONT> <FONT color=#008080>{</FONT> <FONT color=#008080>]</FONT>
<FONT color=#000080>GMLpoint</FONT><FONT color=#000000>=:</FONT> <FONT color=#008080>[:</FONT> <FONT color=#008080>&lt;</FONT> <FONT color=#008080>3:</FONT> <FONT color=#008080>{.</FONT> <FONT color=#008080>]</FONT>

<FONT color=#008000>NB. arrays, 2.6</FONT>
<FONT color=#000080>GMLget</FONT><FONT color=#000000>=:</FONT> <FONT color=#000080>verb</FONT> <FONT color=#000080>define</FONT>
<FONT color=#008080>'arr i'</FONT><FONT color=#000000>=.</FONT> <FONT color=#c0c0c0>y.</FONT>
<FONT color=#000080>i</FONT><FONT color=#008080>{</FONT><FONT color=#000080>arr</FONT>
)
<FONT color=#000080>GMLlength</FONT><FONT color=#000000>=:</FONT> <FONT color=#008080>$</FONT>

<FONT color=#008000>NB. rendering, 3.8</FONT>
<FONT color=#000080>GMLrender</FONT><FONT color=#000000>=:</FONT> <FONT color=#000080>verb</FONT> <FONT color=#000080>define</FONT>
<FONT color=#008080>'amb lights obj depth fov wid ht file'</FONT><FONT color=#000000>=.</FONT> <FONT color=#c0c0c0>y.</FONT>
<FONT color=#008080>'P6'</FONT><FONT color=#000080>fappends</FONT> <FONT color=#000080>file</FONT>
<FONT color=#008080>'# juggle-icfp potemkin PPM file'</FONT> <FONT color=#000080>fappends</FONT> <FONT color=#000080>file</FONT>
(<FONT color=#ff0000>&quot;:</FONT><FONT color=#000080>wid</FONT><FONT color=#008080>,</FONT><FONT color=#000080>ht</FONT>)<FONT color=#000080>fappends</FONT> <FONT color=#000080>file</FONT>
<FONT color=#008080>'255'</FONT> <FONT color=#000080>fappends</FONT> <FONT color=#000080>file</FONT>
((<FONT color=#008080>*</FONT><FONT color=#ffa500>/</FONT><FONT color=#a020f0>3</FONT><FONT color=#008080>,</FONT><FONT color=#000080>wid</FONT><FONT color=#008080>,</FONT><FONT color=#000080>ht</FONT>)<FONT color=#008080>#</FONT><FONT color=#008080>'J'</FONT>)<FONT color=#000080>fappend</FONT> <FONT color=#000080>file</FONT>
<FONT color=#000080>file</FONT>
)

<FONT color=#008000>NB. utility</FONT>
<FONT color=#000080>assert</FONT><FONT color=#000000>=:</FONT> <FONT color=#a020f0>0</FONT> <FONT color=#a020f0>0</FONT><FONT color=#ff0000>&quot;</FONT>_ <FONT color=#008080>$</FONT> <FONT color=#a020f0>13</FONT><FONT color=#ff0000>!:</FONT><FONT color=#a020f0>8</FONT><FONT color=#008080>^:</FONT>((<FONT color=#008080>0:</FONT> <FONT color=#008080>e.</FONT> <FONT color=#008080>]</FONT>)<FONT color=#ff0000>`</FONT>(<FONT color=#a020f0>12</FONT><FONT color=#ff0000>&quot;</FONT>_))
<FONT color=#000080>rfd</FONT><FONT color=#000000>=:</FONT> <FONT color=#008080>%</FONT><FONT color=#ff0000>&amp;</FONT><FONT color=#a020f0>180</FONT> <FONT color=#ff0000>@</FONT> <FONT color=#008080>o.</FONT> <FONT color=#008000>NB. radians from degrees</FONT>
<FONT color=#000080>null</FONT><FONT color=#000000>=:</FONT> <FONT color=#000080>a</FONT><FONT color=#ff0000>:</FONT>


        
</PRE>
</BODY>
</HTML>
